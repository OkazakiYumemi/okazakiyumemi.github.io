<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta http-equiv="Content-Security-Policy" content="connect-src 'self'">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon16.png">
    <link rel="stylesheet" type="text/css" href="/hide/main.css">
    <title>20201205 | Okazaki Yumemi's blog</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$', '$']], displayMath: [['$$', '$$']]}});
    </script>
</head>

<body>
<div class="content-wrap">
    <p>
    <h2>杂题</h2>
    <h2>K</h2>
    <h3>题意简述</h3>
    给两个长为 $n$，只含 <code>'A'</code>、<code>'B'</code>、<code>'C'</code> （称为三种「颜色」）的字符串 $s, t$，每次可以选择 $s$ 中一个左右（字符串为环状）颜色不同的位置 $i$，将该位置改为任意颜色。<br>
    判断能否在 $10\times n$ 次内将 $s$ 变为 $t$，并构造方案。$n\le 10^5$。<br>
    <h3>主要思路</h3>
    注意到操作是可逆的，试图把 $s$ 和 $t$ 共同变为好看形式。<br>
    先判掉一堆至少一个串完全不能动的弱智情况。<br><br>
    设美丽的串为：仅有一个位置 $i$ 的颜色与其他位置不同（称为「特殊位置」），其他位置（称为「一般位置」）颜色均相同的串。<br>
    考虑两个美丽的串之间怎么互相变：<br>
    显然，我们可以先把特殊位置拧成相同的。现在我们要考虑将特殊位置和一般位置的颜色分别变成相同的。<br>
    一般位置可以直接变，特殊位置可以变一个相邻位置之后变再把相邻位置变回来。总之还是很好搞，瞎讨论没了。<br><br>
    那么现在问题就变成将一个串变为一个美丽的串。<br>
    假设我们现在找到一个位置 $x$ 是可以修改的，将其改为与前一个位置不同的颜色。设前一个位置 $p=pre(x)$，颜色 $a(p)=f$。<br>
    然后我们从 $x$ 开始依次将位置 $i$ 改为非 $f$ 的颜色，且保证下一个位置 $nxt(i)$ 能够修改。<strong>对于 $pre(p)$ 位置则不需要满足后面一个限制。</strong><br>
    这显然是可以做到的，修改一轮后，每个位置颜色都不为 $f$。<br>
    那么再次从 $x$ 开始依次将位置 $i$ 改为颜色 $f$ 即可。<strong>注意 $pre(p)$ 位置不能也不应被修改。</strong><br>
    这样我们就将这个串变为了美丽的串。<br>
    次数限制很宽，随便跑都可以。<br>
    </p>
</div>
</body>

</html>